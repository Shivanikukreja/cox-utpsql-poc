parameters:
  - name: createDatabase
    type: object
    default:
      - name: dbname
        default: ""
      - name: oracleVersion
        default: ""  
      - name: dockerOptions
        default: "--shm-size=1g"
      - name: dockerPortMap
        default: "1521"
      - name: connectionString
        default: ""   

jobs:
  - job: BuildDatabase
    displayName: Build Database
    variables:
    # Using this variable, the template references the correct variable template file (vars-dev.yaml, vars-qa.yaml or vars-prd.yaml) from the vars folder.
    - template: vars/vars-global.yml    
    steps:
      - template: t-task-extend-create-docker-database.yml
        parameters:
          containerRegistry: ${{ variables.containerRegistry }}
          dockerRepo: ${{ variables.dockerRepo }}
          createDatabase: ${{ parameters.createDatabase }}
      - template: t-task-extend-download-binaries.yml
        parameters:
          packages:
            - name: sqlcl
              download_location: "$(Build.BinariesDirectory)/sqlcl-latest.zip"
              unpack_location: "$(Build.BinariesDirectory)"
              url:  ${{ variables.sqlclUrl }}
              archive: "zip"
              addtoPath: "$(SQLCL_DIR)/bin"

            - name: utlplsqlcli
              download_location: "$(Build.BinariesDirectory)/utPLSQL-cli.zip"
              unpack_location: "$(Build.BinariesDirectory)"
              url:  ${{ variables.utplsqlUrl }}
              archive: "zip"
              addToPath: "$(UTPLSQL_CLI_DIR)/bin"           